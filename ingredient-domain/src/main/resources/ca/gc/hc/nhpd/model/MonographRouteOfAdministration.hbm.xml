<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.6//EN"
	"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="ca.gc.hc.nhpd.model">
	<class name="MonographRouteOfAdministration" table="monograph_routeofadmins" lazy="false">
	    <cache usage="read-write"/>
		<id name="id" type="java.lang.Long" column="monoadminrt_id">
       		<generator class="sequence">
                <param name="sequence">monograph_routeofadmins_seq</param>
       		</generator>
    	</id> 

		<property name="code" type="string" length="20" column="code" not-null="true"/>
        <many-to-one name="routeOfAdministration" column="adminrt_id"/>
        
        <!-- orig mapping back to parent
        <set name="sharedMonographs" inverse="true" sort="natural" table="monograph_roa_shrd_monographs">
			<key column="monoadminrt_id"/>
			<many-to-many column="mono_id" class="Monograph"/>
		</set>
		-->
		<!-- mapping back to parent -->
		<set name="monographs" inverse="true" sort="natural" table="monograph_roa_monographs">
		    <cache usage="read-write"/>
			<key column="monoadminrt_id"/>
			<many-to-many column="mono_id" class="Monograph"/>
		</set>
		
		<set name="dosageFormNotes" sort="natural" table="monograph_roa_gentexts">
		    <cache usage="read-write"/>
			<key column="monoadminrt_id"/>
			<many-to-many column="gentext_id" class="GenericText"/>
		</set>
		<set name="specificDosageForms" sort="natural" table="monograph_roa_dosage_forms">
		    <cache usage="read-write"/>
			<key column="monoadminrt_id"/>
			<many-to-many column="dosefrm_id" class="DosageForm"/>
        </set>
        <set name="citations" sort="natural" table="monograph_roa_citations">
		    <cache usage="read-write"/>
            <key column="monoadminrt_id" />
            <many-to-many column="citation_id" class="Citation"/>
        </set>   

		<!-- PersistentObject -->
       	<property name="creationDate" type="date" column="monoadminrt_creation_date" not-null="true"  />
        <property name="lastUpdateDate" type="date" column="monoadminrt_lastupdate_date" not-null="true" />
        <many-to-one name="lastUpdateAccount" column="useracc_id" not-null="true" />

		<!-- Joins must go at the end -->
		<!-- 
		<join table="monograph_roa_dist_monographs" inverse="true" optional="true">
			<key column="monoadminrt_id"/>
			<many-to-one name="distinctMonograph" column="mono_id"/>
		</join>
		-->
	</class>
</hibernate-mapping>
