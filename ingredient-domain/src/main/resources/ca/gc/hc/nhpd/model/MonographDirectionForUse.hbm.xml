<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.6//EN"
	"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="ca.gc.hc.nhpd.model">
	<class name="MonographDirectionForUse" table="monograph_directions_for_uses" lazy="false">
	    <cache usage="read-write"/>
		<id name="id" type="java.lang.Long" column="monodfu_id">
       		<generator class="sequence">
                <param name="sequence">MONOGRAPH_DIRECTS_FOR_USES_SEQ</param>
       		</generator>
    	</id> 

		<!-- Basic Attributes -->
		<property name="code" type="string" length="20" column="code" not-null="true"/>
        <property name="directionForUseE" type="string" column="monodfu_name_eng"/>
        <property name="directionForUseF" type="string" column="monodfu_name_fr"/>        
    	
    	<!-- DependantObject -->
    	<set name="monographUses" sort="natural" table="monograph_drfruse_mono_uses">
	 		<cache usage="read-write"/>
			<key column="monodfu_id"/>
    	    <many-to-many column="monouse_id" class="MonographUse" />
		</set>
    	
    	<!-- mapping to parent - deprecated
    	<set name="monographDoses" inverse="true" sort="natural" table="monograph_dose_mono_dfus">
    	      <key column="monodfu_id" />
			<many-to-many column="monodose_id" class="MonographDose"/>
    	</set>
    	-->
    	<!-- 
    	<set name="organismParts" sort="natural" table="monograph_drfruse_orgparts">
    	      <key column="monodfu_id" />
    	      <many-to-many column="orgpart_id" class="OrganismPart" />
    	</set>
		-->
		<set name="monographSourceOrganismParts" sort="natural" 
			table="monodrfruse_monosrcorgparts">
        	  <cache usage="read-write"/>
			  <key column="monodfu_id" />
    	      <many-to-many column="monosrc_orgpart_id" class="MonographSourceOrganismPart" />
    	</set>
		
		<many-to-one name="monographSourceIngredient" column="mono_source_ingred_id"/>
		<many-to-one name="monographDoseCombination" column="monodosecomb_id"/>     
		<many-to-one name="monographPreparation" column="monoprep_id"/>
        <many-to-one name="subPopulation" column="subpop_id"/>  
        <set name="otherSources" sort="natural" table="monograph_drfruse_gentexts">
              <cache usage="read-write"/>
    	      <key column="monodfu_id" />
    	      <many-to-many column="gentext_id" class="GenericText" />
    	</set>
        <property name="otherDependencyE" type="string" column="other_dependency_eng"/>
        <property name="otherDependencyF" type="string" column="other_dependency_fr"/>        
        
        <set name="citations" sort="natural" table="monograph_drfruse_citations">
              <cache usage="read-write"/>
              <key column="monodfu_id" />
              <many-to-many column="citation_id" class="Citation"/>
        </set>   

		<!-- PersistentObject -->
       	<property name="creationDate" type="date" column="monodfu_creation_date" not-null="true"  />
        <property name="lastUpdateDate" type="date" column="monodfu_lastupdate_date" not-null="true" />
        <many-to-one name="lastUpdateAccount" column="useracc_id" not-null="true" />

		<!-- Joins must go at the end 
		<join table="monograph_dose_dist_mono_dfus" inverse="true" optional="true">
			<key column="monodfu_id"/>
			<many-to-one name="monographDistinctDose" column="monodose_id"/>
		</join>
		-->
	</class>
</hibernate-mapping>
