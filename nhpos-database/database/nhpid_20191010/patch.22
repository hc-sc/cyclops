-----------------------------------
--patch #22
-- date: 2019/10/29
-- fixes: WPLA-340,341,342,343,344,345 and new rules column
----------------------------------
spool patch_22.log
prompt Patch 22
prompt ---------
prompt Add/modify columns 
alter table X$GROUP_RULES add rule_text varchar2(4000);

prompt ---------
prompt Update DF synonyms
update synonyms s
set synonym_name_eng = 'Aerosol, spray',
synonym_name_fr = 'Aérosol, Vaporisateur'
where synonym_id = 1;

update synonyms s
set synonym_name_eng = 'Spray, metered dose',
synonym_name_fr = 'Vaporisateur, à dose mesurée'
where synonym_id = 22;

update synonyms s
set synonym_name_eng = 'Glycerine tincture',
synonym_name_fr = 'Glycérite'
where synonym_id = 43;

update synonyms s
set synonym_name_eng = 'Gelcap',
synonym_name_fr = 'Capsule, molle'
where synonym_id = 7;

update synonyms s
set synonym_name_eng = 'Eye drops',
synonym_name_fr = 'Collyre'
where synonym_id = 8;

update synonyms s
set synonym_name_eng = 'Beadlet',
synonym_name_fr = 'Globule'
where synonym_id = 10;

update synonyms s
set synonym_name_eng = 'Pastille',
synonym_name_fr = 'Pellet'
where synonym_id = 13;

update synonyms s
set synonym_name_eng = 'Spray',
synonym_name_fr = 'Vaporisateur'
where synonym_id = 20;

update synonyms s
set synonym_name_eng = 'Spray, suspension',
synonym_name_fr = 'Vaporisateur, suspension'
where synonym_id = 21;

update synonyms s
set synonym_name_eng = 'Tablet',
synonym_name_fr = 'Tablette'
where synonym_id = 25;

update synonyms s
set synonym_name_eng = 'Mousse',
synonym_name_fr = 'Mousse'
where synonym_id = 32;

update synonyms s
set synonym_name_eng = 'Spray (bag-on-valve)',
synonym_name_fr = 'Vaporisateur (sac sur la valve)'
where synonym_id = 33;

commit;


prompt ---------
prompt compile schema and show errors

exec dbms_utility.compile_schema(user);

select object_name, object_type from user_objects where status = 'INVALID';

set linesize 1000 pagesize 9999 trimspool on
col name for a30
col line for 99999
col message_number for 99999
col text for a512
select t.name,
       t.line,
       t.message_number,
       t.text
  from user_errors t
;

spool off

